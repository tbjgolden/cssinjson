!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n=n||self).nanoCSS={})}(this,function(n){"use strict";var e,t=function(n,e){return n(e={exports:{}},e.exports),e.exports}(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,e,t){return p(i(n,e,t))},e.expand=i,e.generate=p,e.inject=l,e.deepClone=s;var t=/\{(\^*)([0-9a-z]+)\}/i,r=/&/g,o=Array.isArray;function u(n){return n!=n}function c(n,e){return(typeof n)[0]===(e=e||"s")}function a(n){return o(n)?n:[n]}function f(n){return n.reduce(function(n,e){return n.concat(e)},[])}function i(n,e,t){(e=e||{})._=e._||[],t=!c(t,"b")||t,c(n)&&(n=JSON.parse(n));var r=[];if(o(n)){if(c(n[0]))return l(n,e);for(var p=0;p<n.length;p++)r[p]=i(n[p],e,!1)}else if(n.$){for(var _=[],v={},h=0;h<n.$.length;h++){var g=l(n.$[h][0],e),y=s(e,{_:e._.concat([n.$[h]])}),j=i(a(n._),y,!1).reduce(function(n,e){return n[~~d(e)].push(e),n},[[],[]]);_.push.apply(_,f(j[0])),j[1].length&&(v[g]=(v[g]||[]).concat(j[1]))}r=Object.entries(v).concat(_)}else{var m=[e];Object.keys(n).forEach(function(e){"_"!==e&&(c(n[e])&&(n[e]=function(n){var e=n.split(":").map(function(n){return parseInt(n)});if(u(e[0])||u(e[1])||u(e[2]))return[n];var t=e[0],r=e[~~c(e[1],"n")],o=e[2]||1,a=[],f=t;for(;t<=f&&f<=r;)a.push(f),f+=o;return a}(n[e])),m=f(n[e].map(function(n){return m.map(function(t){return(t=s(t))[e]=n,t})})))});for(var x=0;x<m.length;x++)r[x]=i(a(n._),m[x],!1)}return t?function n(e){var t=function(n){if(!c(n[0])||!o(n[1]))return!1;for(var e=1,t=0;t<n[1].length;t++)d(n[1][t])||(e=2);return e}(e);2===t&&(e[1]=n(e[1]));return t?[e]:f(e.map(function(e){return n(e)}))}(r):r}function p(n){return n.map(function(n){return"".concat(n[0]," { ").concat(n[1].map(function(n){return o(n[1])?p([n]):"".concat(n[0],": ").concat(n[1])}).join("; ")," }")}).join("\n")}function l(n,e,u){if((e=e||{})._=e._||[],u=!c(u,"b")||u,o(n))return n.map(function(n){return l(n,e,!1)});for(var a=(n+="").match(t);a;){var f=e._.length-a[1].length-1,i=parseInt(a[2]),p=i==i&&f>=0?i:a[2];a=(n=n.replace(a[0],(c(p,"n")?e._[f]:e)[p])).match(t)}if(u&&e._.length){var s=e._[e._.length-1][0];return~n.indexOf("&")?n.replace(r,s):"".concat(s).concat(n)}return n}function s(n,e){for(var t in e=e||{},n){var r=n[t];e[t]=e[t]||(r&&c(r,"o")?s(r.constructor(),r):r)}return e}function d(n){return c(n[0])&&c(n[1])}}),r=(e=t)&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,o=t.expand,u=t.generate,c=t.inject,a=t.deepClone;n.deepClone=a,n.default=r,n.expand=o,n.generate=u,n.inject=c,Object.defineProperty(n,"__esModule",{value:!0})});
