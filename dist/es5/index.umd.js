!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n=n||self).nCSS={})}(this,function(n){"use strict";var e,r=function(n,e){return n(e={exports:{}},e.exports),e.exports}(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.deepClone=i,e.inject=l,e.generate=p,e.flatten=s,e.default=function(n,e,r){return p(s(n,e,r))};var r=/\{(\^*)([0-9a-z]+)\}/i,t=/&/g;function o(n,e){return(typeof n)[0]===(e=e||"s")}function u(n){return o(n[0])&&o(n[1])}function a(n){return n.reduce(function(n,e){return n.concat(e)},[])}function c(n){return Array.isArray(n)?n:[n]}function f(n){var e=function(n){if(!o(n[0])||!Array.isArray(n[1]))return!1;for(var e=1,r=0;r<n[1].length;r++)u(n[1][r])||(e=2);return e}(n);return 2===e&&(n[1]=f(n[1])),e?[n]:a(n.map(function(n){return f(n)}))}function i(n,e){for(var r in e=e||{},n){var t=n[r];e[r]=e[r]||(t&&o(t,"o")?i(t.constructor(),t):t)}return e}function l(n,e,u){if((e=e||{})._=e._||[],u=!o(u,"b")||u,Array.isArray(n))return n.map(function(n){return l(n,e,!1)});for(var a=(n+="").match(r);a;){var c=e._.length-a[1].length-1,f=parseInt(a[2]),i=f==f&&c>=0?f:a[2];a=(n=n.replace(a[0],(o(i,"n")?e._[c]:e)[i])).match(r)}if(u&&e._.length){var p=e._[e._.length-1][0];return~n.indexOf("&")?n.replace(t,p):"".concat(p).concat(n)}return n}function p(n){return n.map(function(n){return"".concat(n[0]," { ").concat(n[1].map(function(n){return Array.isArray(n[1])?p([n]):"".concat(n[0],": ").concat(n[1])}).join("; ")," }")}).join("\n")}function s(n,e,r){(e=e||{})._=e._||[],r=!o(r,"b")||r,o(n)&&(n=JSON.parse(n));var t=[];if(Array.isArray(n)){if(o(n[0]))return l(n,e);for(var p=0;p<n.length;p++)t[p]=s(n[p],e,!1)}else if(n.$){for(var d=[],h={},y=0;y<n.$.length;y++){var _=l(n.$[y][0],e),v=i(e,{_:e._.concat([n.$[y]])}),g=s(c(n._),v,!1).reduce(function(n,e){return n[~~u(e)].push(e),n},[[],[]]);d.push.apply(d,a(g[0])),g[1].length&&(h[_]=(h[_]||[]).concat(g[1]))}t=Object.entries(h).concat(d)}else{var j=[e];Object.keys(n).forEach(function(e){"_"!==e&&(o(n[e])&&(n[e]=function(n){for(var e=n.split(":").map(function(n){return parseInt(n)}).slice(0,3),r=e.length>1?e[0]:0,t=e[e.length-1],o=e.length>2?e[1]:1,u=[],a=r;r<=a&&a<t;)u.push(a),a+=o;return u}(n[e])),j=a(n[e].map(function(n){return j.map(function(r){return(r=i(r))[e]=n,r})})))});for(var m=0;m<j.length;m++)t[m]=s(c(n._),j[m],!1)}return r?f(t):t}}),t=(e=r)&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,o=r.deepClone,u=r.inject,a=r.generate,c=r.flatten;n.deepClone=o,n.default=t,n.flatten=c,n.generate=a,n.inject=u,Object.defineProperty(n,"__esModule",{value:!0})});
