!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).nCSS={})}(this,function(e){"use strict";var n,t=function(e,n){return e(n={exports:{}},n.exports),n.exports}(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.deepClone=i,n.inject=l,n.generate=p,n.flatten=s,n.default=function(e,n,t){return p(s(e,n,t))};var t=/\{(\^*)([0-9a-z])\}/i,r=/&/g;function o(e,n){return(typeof e)[0]===(n=n||"s")}function c(e){return o(e[0])&&o(e[1])}function u(e){return e.reduce(function(e,n){return e.concat(n)},[])}function a(e){return Array.isArray(e)?e:[e]}function f(e,n){return function(e){return o(e[0])&&Array.isArray(e[1])&&e[1].every(c)}(e)?[e]:u(e.map(function(e){return f(e)}))}function i(e,n){for(var t in n=n||{},e){var r=e[t];n[t]=n[t]||(r&&o(r,"o")?i(r.constructor(),r):r)}return n}function l(e,n,c){if((n=n||{})._=n._||[],c=!o(c,"b")||c,Array.isArray(e))return e.map(function(e){return l(e,n,!1)});for(var u=(e+="").match(t);u;){var a=n._.length-u[1].length-1,f=parseInt(u[2])||u[2];u=(e=e.replace(u[0],(o(f,"n")?n._[a]:n)[f])).match(t)}if(c&&n._.length){var i=n._[n._.length-1][0];return~e.indexOf("&")?e.replace(r,i):"".concat(i).concat(e)}return e}function p(e){return e.map(function(e){return"".concat(e[0]," { ").concat(e[1].map(function(e){return"".concat(e[0],": ").concat(e[1])}).join("; ")," }")}).join("\n")}function s(e,n,t){(n=n||{})._=n._||[],t=!o(t,"b")||t,o(e)&&(e=JSON.parse(e));var r=[];if(Array.isArray(e)){if(o(e[0]))return l(e,n);for(var p=0;p<e.length;p++)r[p]=s(e[p],n,!1)}else if(e.$){for(var d=[],_={},y=0;y<e.$.length;y++){var v=l(e.$[y][0],n),h=i(n,{_:n._.concat([e.$[y]])}),g=s(a(e._),h,!1).reduce(function(e,n){return e[~~c(n)].push(n),e},[[],[]]);d.push.apply(d,u(g[0])),g[1].length&&(_[v]=(_[v]||[]).concat(g[1]))}r=Object.entries(_).concat(d)}else{var j=[n];Object.keys(e).forEach(function(n){"_"!==n&&(j=u(e[n].map(function(e){return j.map(function(t){return(t=i(t))[n]=e,t})})))});for(var m=0;m<j.length;m++)r[m]=s(a(e._),j[m],!1)}return t?f(r):r}}),r=(n=t)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,o=t.deepClone,c=t.inject,u=t.generate,a=t.flatten;e.deepClone=o,e.default=r,e.flatten=a,e.generate=u,e.inject=c,Object.defineProperty(e,"__esModule",{value:!0})});
