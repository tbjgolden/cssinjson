!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n=n||self).nanoCSS={})}(this,function(n){"use strict";const e=/\{(\^*)([0-9a-z]+)\}/i,t=/&/g,r=Array.isArray;function o(n){return n!=n}function c(n,e){return(typeof n)[0]===(e=e||"s")}function u(n){return r(n)?n:[n]}function f(n){return n.reduce((n,e)=>n.concat(e),[])}function i(n,e,t){(e=e||{})._=e._||[],t=!c(t,"b")||t,c(n)&&(n=JSON.parse(n));let l=[];if(r(n)){if(c(n[0]))return s(n,e);for(let t=0;t<n.length;t++)l[t]=i(n[t],e,!1)}else if(n.$){const t=[],r={};for(let o=0;o<n.$.length;o++){const c=s(n.$[o][0],e),l=a(e,{_:e._.concat([n.$[o]])}),h=i(u(n._),l,!1).reduce((n,e)=>(n[~~p(e)].push(e),n),[[],[]]);t.push.apply(t,f(h[0])),h[1].length&&(r[c]=(r[c]||[]).concat(h[1]))}l=Object.entries(r).concat(t)}else{let t=[e];Object.keys(n).forEach(e=>{"_"!==e&&(c(n[e])&&(n[e]=function(n){const e=n.split(":").map(n=>parseInt(n));if(o(e[0])||o(e[1])||o(e[2]))return[n];const t=e[0],r=e[~~c(e[1],"n")],u=e[2]||1,f=[];let i=t;for(;t<=i&&i<=r;)f.push(i),i+=u;return f}(n[e])),t=f(n[e].map(n=>t.map(t=>((t=a(t))[e]=n,t)))))});for(let e=0;e<t.length;e++)l[e]=i(u(n._),t[e],!1)}return t?function n(e){const t=function(n){if(!c(n[0])||!r(n[1]))return!1;let e=1;for(let t=0;t<n[1].length;t++)p(n[1][t])||(e=2);return e}(e);2===t&&(e[1]=n(e[1]));return t?[e]:f(e.map(e=>n(e)))}(l):l}function l(n){return n.map(n=>`${n[0]} { ${n[1].map(n=>r(n[1])?l([n]):`${n[0]}: ${n[1]}`).join("; ")} }`).join("\n")}function s(n,o,u){if((o=o||{})._=o._||[],u=!c(u,"b")||u,r(n))return n.map(n=>s(n,o,!1));let f=(n+="").match(e);for(;f;){const t=o._.length-f[1].length-1,r=parseInt(f[2]),u=r==r&&t>=0?r:f[2];f=(n=n.replace(f[0],(c(u,"n")?o._[t]:o)[u])).match(e)}if(u&&o._.length){const e=o._[o._.length-1][0];return~n.indexOf("&")?n.replace(t,e):`${e}${n}`}return n}function a(n,e){e=e||{};for(let t in n){const r=n[t];e[t]=e[t]||(r&&c(r,"o")?a(r.constructor(),r):r)}return e}function p(n){return c(n[0])&&c(n[1])}n.deepClone=a,n.default=function(n,e,t){return l(i(n,e,t))},n.expand=i,n.generate=l,n.inject=s,Object.defineProperty(n,"__esModule",{value:!0})});
